<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>【知识】【python】【adb】uiautomator2 包文档 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="python 通过 uiautomator2 包操作安卓设备界面的各种方法 安装及 init1pip install uiautomator2  12345678910import uiautomator2 as ui2# 1. wifi 连d &#x3D; ui2.connect(&amp;#x27;10.0.0.1&amp;#x27;)# 2. usb 连d &#x3D; ui2.connect(&amp;#x27;123456f&amp;#x">
<meta property="og:type" content="article">
<meta property="og:title" content="【知识】【python】【adb】uiautomator2 包文档">
<meta property="og:url" content="http://example.com/2022/05/29/ui2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="python 通过 uiautomator2 包操作安卓设备界面的各种方法 安装及 init1pip install uiautomator2  12345678910import uiautomator2 as ui2# 1. wifi 连d &#x3D; ui2.connect(&amp;#x27;10.0.0.1&amp;#x27;)# 2. usb 连d &#x3D; ui2.connect(&amp;#x27;123456f&amp;#x">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-05-29T09:36:53.000Z">
<meta property="article:modified_time" content="2022-05-29T10:07:58.234Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ui2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/29/ui2/" class="article-date">
  <time datetime="2022-05-29T09:36:53.000Z" itemprop="datePublished">2022-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      【知识】【python】【adb】uiautomator2 包文档
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>python 通过 uiautomator2 包操作安卓设备界面的各种方法</p>
<h1 id="安装及-init"><a href="#安装及-init" class="headerlink" title="安装及 init"></a>安装及 init</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uiautomator2</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> uiautomator2 <span class="keyword">as</span> ui2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. wifi 连</span></span><br><span class="line">d = ui2.connect(<span class="string">&#x27;10.0.0.1&#x27;</span>)</span><br><span class="line"><span class="comment"># 2. usb 连</span></span><br><span class="line">d = ui2.connect(<span class="string">&#x27;123456f&#x27;</span>)</span><br><span class="line"><span class="comment"># 3. adb wifi 连</span></span><br><span class="line">d = u2.connect_adb_wifi(<span class="string">&quot;10.0.0.1:5555&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.info())</span><br></pre></td></tr></table></figure>

<h1 id="API-合集"><a href="#API-合集" class="headerlink" title="API 合集"></a>API 合集</h1><h2 id="APP-操作"><a href="#APP-操作" class="headerlink" title="APP 操作"></a>APP 操作</h2><ol>
<li><p>安装 app<br><code>d.app_install(&#39;http://some-domain.com/some.apk&#39;)</code></p>
</li>
<li><p>启动 app</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认的这种方法是先通过atx-agent解析apk包的mainActivity，然后调用am start -n $package/$activity启动</span></span><br><span class="line">d.app_start(<span class="string">&quot;com.example.hello_world&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 monkey -p com.example.hello_world -c android.intent.category.LAUNCHER 1 启动</span></span><br><span class="line"><span class="comment"># 这种方法有个副作用，它自动会将手机的旋转锁定给关掉</span></span><br><span class="line">d.app_start(<span class="string">&quot;com.example.hello_world&quot;</span>, use_monkey=<span class="literal">True</span>) <span class="comment"># start with package name</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过指定main activity的方式启动应用，等价于调用am start -n com.example.hello_world/.MainActivity</span></span><br><span class="line">d.app_start(<span class="string">&quot;com.example.hello_world&quot;</span>, <span class="string">&quot;.MainActivity&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>停止 app 运行</p>
</li>
</ol>
<ul>
<li><p>单个 app</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># equivalent to `am force-stop`, thus you could lose data</span></span><br><span class="line">d.app_stop(<span class="string">&quot;com.example.hello_world&quot;</span>) </span><br><span class="line"><span class="comment"># equivalent to `pm clear`</span></span><br><span class="line">d.app_clear(<span class="string">&#x27;com.example.hello_world&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>所有 app</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># stop all</span></span><br><span class="line">d.app_stop_all()</span><br><span class="line"><span class="comment"># stop all app except for com.examples.demo</span></span><br><span class="line">d.app_stop_all(excludes=[<span class="string">&#x27;com.examples.demo&#x27;</span>])</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li>获取 app 信息</li>
</ol>
<ul>
<li><p>指定 app</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">d.app_info(<span class="string">&quot;com.examples.demo&quot;</span>)</span><br><span class="line"><span class="comment"># expect output</span></span><br><span class="line"><span class="comment">#&#123;</span></span><br><span class="line"><span class="comment">#    &quot;mainActivity&quot;: &quot;com.github.uiautomator.MainActivity&quot;,</span></span><br><span class="line"><span class="comment">#    &quot;label&quot;: &quot;ATX&quot;,</span></span><br><span class="line"><span class="comment">#    &quot;versionName&quot;: &quot;1.1.7&quot;,</span></span><br><span class="line"><span class="comment">#    &quot;versionCode&quot;: 1001007,</span></span><br><span class="line"><span class="comment">#    &quot;size&quot;:1760809</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># save app icon</span></span><br><span class="line">img = d.app_icon(<span class="string">&quot;com.examples.demo&quot;</span>)</span><br><span class="line">img.save(<span class="string">&quot;icon.png&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>正在运行的 app</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d.app_list_running()</span><br><span class="line"><span class="comment"># expect output</span></span><br><span class="line"><span class="comment"># [&quot;com.xxxx.xxxx&quot;, &quot;com.github.uiautomator&quot;, &quot;xxxx&quot;]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pid = d.app_wait(<span class="string">&quot;com.example.android&quot;</span>) <span class="comment"># 等待应用运行, return pid(int)</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> pid:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;com.example.android is not running&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;com.example.android pid is %d&quot;</span> % pid)</span><br><span class="line"></span><br><span class="line">d.app_wait(<span class="string">&quot;com.example.android&quot;</span>, front=<span class="literal">True</span>) <span class="comment"># 等待应用前台运行</span></span><br><span class="line">d.app_wait(<span class="string">&quot;com.example.android&quot;</span>, timeout=<span class="number">20.0</span>) <span class="comment"># 最长等待时间20s（默认）</span></span><br></pre></td></tr></table></figure>

<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><ol>
<li><p>文件传输<br>push</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># push to a folder</span></span><br><span class="line">d.push(<span class="string">&quot;foo.txt&quot;</span>, <span class="string">&quot;/sdcard/&quot;</span>)</span><br><span class="line"><span class="comment"># push and rename</span></span><br><span class="line">d.push(<span class="string">&quot;foo.txt&quot;</span>, <span class="string">&quot;/sdcard/bar.txt&quot;</span>)</span><br><span class="line"><span class="comment"># push fileobj</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;foo.txt&quot;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    d.push(f, <span class="string">&quot;/sdcard/&quot;</span>)</span><br><span class="line"><span class="comment"># push and change file access mode</span></span><br><span class="line">d.push(<span class="string">&quot;foo.sh&quot;</span>, <span class="string">&quot;/data/local/tmp/&quot;</span>, mode=<span class="number">0o755</span>)</span><br></pre></td></tr></table></figure>
<p>pull</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d.pull(<span class="string">&quot;/sdcard/tmp.txt&quot;</span>, <span class="string">&quot;tmp.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># FileNotFoundError will raise if the file is not found on the device</span></span><br><span class="line">d.pull(<span class="string">&quot;/sdcard/some-file-not-exists.txt&quot;</span>, <span class="string">&quot;tmp.txt&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>shell</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">output, exit_code = d.shell(<span class="string">&quot;pwd&quot;</span>, timeout=<span class="number">60</span>) <span class="comment"># timeout 60s (Default)</span></span><br><span class="line"><span class="comment"># output: &quot;/\n&quot;, exit_code: 0</span></span><br><span class="line"><span class="comment"># Similar to command: adb shell pwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Since `shell` function return type is `namedtuple(&quot;ShellResponse&quot;, (&quot;output&quot;, &quot;exit_code&quot;))`</span></span><br><span class="line"><span class="comment"># so we can do some tricks</span></span><br><span class="line">output = d.shell(<span class="string">&quot;pwd&quot;</span>).output</span><br><span class="line">exit_code = d.shell(<span class="string">&quot;pwd&quot;</span>).exit_code</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">r = d.shell(<span class="string">&quot;logcat&quot;</span>, stream=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># r: requests.models.Response</span></span><br><span class="line">deadline = time.time() + <span class="number">10</span> <span class="comment"># run maxium 10s</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> r.iter_lines(): <span class="comment"># r.iter_lines(chunk_size=512, decode_unicode=None, delimiter=None)</span></span><br><span class="line">        <span class="keyword">if</span> time.time() &gt; deadline:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Read:&quot;</span>, line.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    r.close() <span class="comment"># this method must be called</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>session<br>代表一个 app 的生命周期，可以用来启动、停用 app，检测 app crash</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sess = d.session(<span class="string">&quot;com.netease.cloudmusic&quot;</span>) <span class="comment"># start 网易云音乐</span></span><br><span class="line">sess.close() <span class="comment"># 停止网易云音乐</span></span><br><span class="line">sess.restart() <span class="comment"># 冷启动网易云音乐</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> d.session(<span class="string">&quot;com.netease.cloudmusic&quot;</span>) <span class="keyword">as</span> sess:</span><br><span class="line">    sess(text=<span class="string">&quot;Play&quot;</span>).click()</span><br><span class="line"></span><br><span class="line"><span class="comment"># launch app if not running, skip launch if already running</span></span><br><span class="line">sess = d.session(<span class="string">&quot;com.netease.cloudmusic&quot;</span>, attach=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># raise SessionBrokenError if not running</span></span><br><span class="line">sess = d.session(<span class="string">&quot;com.netease.cloudmusic&quot;</span>, attach=<span class="literal">True</span>, strict=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># When app is still running</span></span><br><span class="line">sess(text=<span class="string">&quot;Music&quot;</span>).click() <span class="comment"># operation goes normal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If app crash or quit</span></span><br><span class="line">sess(text=<span class="string">&quot;Music&quot;</span>).click() <span class="comment"># raise SessionBrokenError</span></span><br><span class="line"><span class="comment"># other function calls under session will raise SessionBrokenError too</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># check if session is ok.</span></span><br><span class="line"><span class="comment"># Warning: function name may change in the future</span></span><br><span class="line">sess.running() <span class="comment"># True or False</span></span><br></pre></td></tr></table></figure></li>
<li><p>设备信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">d.info</span><br><span class="line"><span class="comment"># &#123; </span></span><br><span class="line"><span class="comment">#    u&#x27;displayRotation&#x27;: 0,</span></span><br><span class="line"><span class="comment">#    u&#x27;displaySizeDpY&#x27;: 640,</span></span><br><span class="line"><span class="comment">#    u&#x27;displaySizeDpX&#x27;: 360,</span></span><br><span class="line"><span class="comment">#    u&#x27;currentPackageName&#x27;: u&#x27;com.android.launcher&#x27;,</span></span><br><span class="line"><span class="comment">#    u&#x27;productName&#x27;: u&#x27;takju&#x27;,</span></span><br><span class="line"><span class="comment">#    u&#x27;displayWidth&#x27;: 720,</span></span><br><span class="line"><span class="comment">#    u&#x27;sdkInt&#x27;: 18,</span></span><br><span class="line"><span class="comment">#    u&#x27;displayHeight&#x27;: 1184,</span></span><br><span class="line"><span class="comment">#    u&#x27;naturalOrientation&#x27;: True</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.window_size())</span><br><span class="line"><span class="comment"># device upright output example: (1080, 1920)</span></span><br><span class="line"><span class="comment"># device horizontal output example: (1920, 1080)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.app_current())</span><br><span class="line"><span class="comment"># Output example 1: &#123;&#x27;activity&#x27;: &#x27;.Client&#x27;, &#x27;package&#x27;: &#x27;com.netease.example&#x27;, &#x27;pid&#x27;: 23710&#125;</span></span><br><span class="line"><span class="comment"># Output example 2: &#123;&#x27;activity&#x27;: &#x27;.Client&#x27;, &#x27;package&#x27;: &#x27;com.netease.example&#x27;&#125;</span></span><br><span class="line"><span class="comment"># Output example 3: &#123;&#x27;activity&#x27;: None, &#x27;package&#x27;: None&#125;</span></span><br><span class="line"></span><br><span class="line">d.wait_activity(<span class="string">&quot;.ApiDemos&quot;</span>, timeout=<span class="number">10</span>) <span class="comment"># default timeout 10.0 seconds</span></span><br><span class="line"><span class="comment"># Output: true of false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.serial)</span><br><span class="line"><span class="comment"># output example: 74aAEDR428Z9</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.wlan_ip)</span><br><span class="line"><span class="comment"># output example: 10.0.0.1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.device_info)</span><br><span class="line"><span class="comment"># &#123;&#x27;udid&#x27;: &#x27;3578298f-b4:0b:44:e6:1f:90-OD103&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;version&#x27;: &#x27;7.1.1&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;serial&#x27;: &#x27;3578298f&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;brand&#x27;: &#x27;SMARTISAN&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;model&#x27;: &#x27;OD103&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;hwaddr&#x27;: &#x27;b4:0b:44:e6:1f:90&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;port&#x27;: 7912,</span></span><br><span class="line"><span class="comment">#  &#x27;sdk&#x27;: 25,</span></span><br><span class="line"><span class="comment">#  &#x27;agentVersion&#x27;: &#x27;dev&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;display&#x27;: &#123;&#x27;width&#x27;: 1080, &#x27;height&#x27;: 1920&#125;,</span></span><br><span class="line"><span class="comment">#  &#x27;battery&#x27;: &#123;&#x27;acPowered&#x27;: False,</span></span><br><span class="line"><span class="comment">#   &#x27;usbPowered&#x27;: False,</span></span><br><span class="line"><span class="comment">#   &#x27;wirelessPowered&#x27;: False,</span></span><br><span class="line"><span class="comment">#   &#x27;status&#x27;: 3,</span></span><br><span class="line"><span class="comment">#   &#x27;health&#x27;: 0,</span></span><br><span class="line"><span class="comment">#   &#x27;present&#x27;: True,</span></span><br><span class="line"><span class="comment">#   &#x27;level&#x27;: 99,</span></span><br><span class="line"><span class="comment">#   &#x27;scale&#x27;: 100,</span></span><br><span class="line"><span class="comment">#   &#x27;voltage&#x27;: 4316,</span></span><br><span class="line"><span class="comment">#   &#x27;temperature&#x27;: 272,</span></span><br><span class="line"><span class="comment">#   &#x27;technology&#x27;: &#x27;Li-ion&#x27;&#125;,</span></span><br><span class="line"><span class="comment">#  &#x27;memory&#x27;: &#123;&#x27;total&#x27;: 3690280, &#x27;around&#x27;: &#x27;4 GB&#x27;&#125;,</span></span><br><span class="line"><span class="comment">#  &#x27;cpu&#x27;: &#123;&#x27;cores&#x27;: 8, &#x27;hardware&#x27;: &#x27;Qualcomm Technologies, Inc MSM8953Pro&#x27;&#125;,</span></span><br><span class="line"><span class="comment">#  &#x27;presenceChangedAt&#x27;: &#x27;0001-01-01T00:00:00Z&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;usingBeganAt&#x27;: &#x27;0001-01-01T00:00:00Z&#x27;</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br></pre></td></tr></table></figure></li>
<li><p>剪切板</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d.set_clipboard(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;label&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(d.clipboard)</span><br></pre></td></tr></table></figure></li>
<li><p>事件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">d.screen_on() <span class="comment"># turn on the screen</span></span><br><span class="line">d.screen_off() <span class="comment"># turn off the screen</span></span><br><span class="line"></span><br><span class="line">d.info.get(<span class="string">&#x27;screenOn&#x27;</span>) <span class="comment"># require Android &gt;= 4.4</span></span><br><span class="line"></span><br><span class="line">d.press(<span class="string">&quot;home&quot;</span>) <span class="comment"># press the home key, with key name</span></span><br><span class="line">d.press(<span class="string">&quot;back&quot;</span>) <span class="comment"># press the back key, with key name</span></span><br><span class="line">d.press(<span class="number">0x07</span>, <span class="number">0x02</span>) <span class="comment"># press keycode 0x07(&#x27;0&#x27;) with META ALT(0x02)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># These key names are currently supported:</span></span><br><span class="line"><span class="comment"># home</span></span><br><span class="line"><span class="comment"># back</span></span><br><span class="line"><span class="comment"># left</span></span><br><span class="line"><span class="comment"># right</span></span><br><span class="line"><span class="comment"># up</span></span><br><span class="line"><span class="comment"># down</span></span><br><span class="line"><span class="comment"># center</span></span><br><span class="line"><span class="comment"># menu</span></span><br><span class="line"><span class="comment"># search</span></span><br><span class="line"><span class="comment"># enter</span></span><br><span class="line"><span class="comment"># delete ( or del)</span></span><br><span class="line"><span class="comment"># recent (recent apps)</span></span><br><span class="line"><span class="comment"># volume_up</span></span><br><span class="line"><span class="comment"># volume_down</span></span><br><span class="line"><span class="comment"># volume_mute</span></span><br><span class="line"><span class="comment"># camera</span></span><br><span class="line"><span class="comment"># power</span></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>手势操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">d.unlock()</span><br><span class="line"><span class="comment"># This is equivalent to</span></span><br><span class="line"><span class="comment"># 1. launch activity: com.github.uiautomator.ACTION_IDENTIFY</span></span><br><span class="line"><span class="comment"># 2. press the &quot;home&quot; key</span></span><br><span class="line"></span><br><span class="line">d.click(x, y)</span><br><span class="line"></span><br><span class="line">d.double_click(x, y)</span><br><span class="line">d.double_click(x, y, <span class="number">0.1</span>) <span class="comment"># default duration between two click is 0.1s</span></span><br><span class="line"></span><br><span class="line">d.long_click(x, y)</span><br><span class="line">d.long_click(x, y, <span class="number">0.5</span>) <span class="comment"># long click 0.5s (default)</span></span><br><span class="line"></span><br><span class="line">d.swipe(sx, sy, ex, ey)</span><br><span class="line">d.swipe(sx, sy, ex, ey, <span class="number">0.5</span>) <span class="comment"># swipe for 0.5s(default)</span></span><br><span class="line"></span><br><span class="line">d.swipe_ext(<span class="string">&quot;right&quot;</span>) <span class="comment"># 手指右滑，4选1 &quot;left&quot;, &quot;right&quot;, &quot;up&quot;, &quot;down&quot;</span></span><br><span class="line">d.swipe_ext(<span class="string">&quot;right&quot;</span>, scale=<span class="number">0.9</span>) <span class="comment"># 默认0.9, 滑动距离为屏幕宽度的90%</span></span><br><span class="line">d.swipe_ext(<span class="string">&quot;right&quot;</span>, box=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)) <span class="comment"># 在 (0,0) -&gt; (100, 100) 这个区域做滑动</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实践发现上滑或下滑的时候，从中点开始滑动成功率会高一些</span></span><br><span class="line">d.swipe_ext(<span class="string">&quot;up&quot;</span>, scale=<span class="number">0.8</span>) <span class="comment"># 代码会vkk</span></span><br><span class="line"><span class="comment"># 还可以使用Direction作为参数</span></span><br><span class="line"><span class="keyword">from</span> uiautomator2 <span class="keyword">import</span> Direction</span><br><span class="line">d.swipe_ext(Direction.FORWARD) <span class="comment"># 页面下翻, 等价于 d.swipe_ext(&quot;up&quot;), 只是更好理解</span></span><br><span class="line">d.swipe_ext(Direction.BACKWARD) <span class="comment"># 页面上翻</span></span><br><span class="line">d.swipe_ext(Direction.HORIZ_FORWARD) <span class="comment"># 页面水平右翻</span></span><br><span class="line">d.swipe_ext(Direction.HORIZ_BACKWARD) <span class="comment"># 页面水平左翻</span></span><br><span class="line"></span><br><span class="line">d.drag(sx, sy, ex, ey)</span><br><span class="line">d.drag(sx, sy, ex, ey, <span class="number">0.5</span>) <span class="comment"># swipe for 0.5s(default)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># swipe from point(x0, y0) to point(x1, y1) then to point(x2, y2)</span></span><br><span class="line"><span class="comment"># time will speed 0.2s bwtween two points</span></span><br><span class="line">d.swipe_points([(x0, y0), (x1, y1), (x2, y2)], <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line">d.touch.down(<span class="number">10</span>, <span class="number">10</span>) <span class="comment"># 模拟按下</span></span><br><span class="line">time.sleep(<span class="number">.01</span>) <span class="comment"># down 和 move 之间的延迟，自己控制</span></span><br><span class="line">d.touch.move(<span class="number">15</span>, <span class="number">15</span>) <span class="comment"># 模拟移动</span></span><br><span class="line">d.touch.up() <span class="comment"># 模拟抬起</span></span><br></pre></td></tr></table></figure></li>
<li><p>屏幕相关</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># retrieve orientation. the output could be &quot;natural&quot; or &quot;left&quot; or &quot;right&quot; or &quot;upsidedown&quot;</span></span><br><span class="line">orientation = d.orientation</span><br><span class="line"><span class="comment"># WARNING: not pass testing in my TT-M1</span></span><br><span class="line"><span class="comment"># set orientation and freeze rotation.</span></span><br><span class="line"><span class="comment"># notes: setting &quot;upsidedown&quot; requires Android&gt;=4.3.</span></span><br><span class="line">d.set_orientation(<span class="string">&#x27;l&#x27;</span>) <span class="comment"># or &quot;left&quot;</span></span><br><span class="line">d.set_orientation(<span class="string">&quot;l&quot;</span>) <span class="comment"># or &quot;left&quot;</span></span><br><span class="line">d.set_orientation(<span class="string">&quot;r&quot;</span>) <span class="comment"># or &quot;right&quot;</span></span><br><span class="line">d.set_orientation(<span class="string">&quot;n&quot;</span>) <span class="comment"># or &quot;natural&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># freeze rotation</span></span><br><span class="line">d.freeze_rotation()</span><br><span class="line"><span class="comment"># un-freeze rotation</span></span><br><span class="line">d.freeze_rotation(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># take screenshot and save to a file on the computer, require Android&gt;=4.2.</span></span><br><span class="line">d.screenshot(<span class="string">&quot;home.jpg&quot;</span>)</span><br><span class="line"><span class="comment"># get PIL.Image formatted images. Naturally, you need pillow installed first</span></span><br><span class="line">image = d.screenshot() <span class="comment"># default format=&quot;pillow&quot;</span></span><br><span class="line">image.save(<span class="string">&quot;home.jpg&quot;</span>) <span class="comment"># or home.png. Currently, only png and jpg are supported</span></span><br><span class="line"><span class="comment"># get opencv formatted images. Naturally, you need numpy and cv2 installed first</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">image = d.screenshot(<span class="built_in">format</span>=<span class="string">&#x27;opencv&#x27;</span>)</span><br><span class="line">cv2.imwrite(<span class="string">&#x27;home.jpg&#x27;</span>, image)</span><br><span class="line"><span class="comment"># get raw jpeg data</span></span><br><span class="line">imagebin = d.screenshot(<span class="built_in">format</span>=<span class="string">&#x27;raw&#x27;</span>)</span><br><span class="line"><span class="built_in">open</span>(<span class="string">&quot;some.jpg&quot;</span>, <span class="string">&quot;wb&quot;</span>).write(imagebin)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get the UI hierarchy dump content (unicoded).</span></span><br><span class="line">xml = d.dump_hierarchy()</span><br><span class="line"></span><br><span class="line">d.open_notification()</span><br><span class="line">d.open_quick_settings()</span><br></pre></td></tr></table></figure></li>
<li><p>选择器（selector）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Select the object with text &#x27;Clock&#x27; and its className is &#x27;android.widget.TextView&#x27;</span></span><br><span class="line">d(text=<span class="string">&#x27;Clock&#x27;</span>, className=<span class="string">&#x27;android.widget.TextView&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Selector supports below parameters. Refer to UiSelector Java doc for detailed information.</span></span><br><span class="line"><span class="comment"># text, textContains, textMatches, textStartsWith</span></span><br><span class="line"><span class="comment"># className, classNameMatches</span></span><br><span class="line"><span class="comment"># description, descriptionContains, descriptionMatches, descriptionStartsWith</span></span><br><span class="line"><span class="comment"># checkable, checked, clickable, longClickable</span></span><br><span class="line"><span class="comment"># scrollable, enabled,focusable, focused, selected</span></span><br><span class="line"><span class="comment"># packageName, packageNameMatches</span></span><br><span class="line"><span class="comment"># resourceId, resourceIdMatches</span></span><br><span class="line"><span class="comment"># index, instance</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># get the children or grandchildren</span></span><br><span class="line">d(className=<span class="string">&quot;android.widget.ListView&quot;</span>).child(text=<span class="string">&quot;Bluetooth&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get siblings</span></span><br><span class="line">d(text=<span class="string">&quot;Google&quot;</span>).sibling(className=<span class="string">&quot;android.widget.ImageView&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get the child matching the condition className=&quot;android.widget.LinearLayout&quot;</span></span><br><span class="line"><span class="comment"># and also its children or grandchildren with text &quot;Bluetooth&quot;</span></span><br><span class="line">d(className=<span class="string">&quot;android.widget.ListView&quot;</span>, resourceId=<span class="string">&quot;android:id/list&quot;</span>) \</span><br><span class="line"> .child_by_text(<span class="string">&quot;Bluetooth&quot;</span>, className=<span class="string">&quot;android.widget.LinearLayout&quot;</span>)</span><br><span class="line"><span class="comment"># get children by allowing scroll search</span></span><br><span class="line">d(className=<span class="string">&quot;android.widget.ListView&quot;</span>, resourceId=<span class="string">&quot;android:id/list&quot;</span>) \</span><br><span class="line"> .child_by_text(</span><br><span class="line">    <span class="string">&quot;Bluetooth&quot;</span>,</span><br><span class="line">    allow_scroll_search=<span class="literal">True</span>,</span><br><span class="line">    className=<span class="string">&quot;android.widget.LinearLayout&quot;</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment">## select &quot;switch&quot; on the right side of &quot;Wi‑Fi&quot;</span></span><br><span class="line">d(text=<span class="string">&quot;Wi‑Fi&quot;</span>).right(className=<span class="string">&quot;android.widget.Switch&quot;</span>).click()</span><br><span class="line">d(text=<span class="string">&quot;Add new&quot;</span>, instance=<span class="number">0</span>)  <span class="comment"># which means the first instance with text &quot;Add new&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># get the count of views with text &quot;Add new&quot; on current screen</span></span><br><span class="line">d(text=<span class="string">&quot;Add new&quot;</span>).count</span><br><span class="line"><span class="comment"># same as count property</span></span><br><span class="line"><span class="built_in">len</span>(d(text=<span class="string">&quot;Add new&quot;</span>))</span><br><span class="line"><span class="comment"># get the instance via index</span></span><br><span class="line">d(text=<span class="string">&quot;Add new&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">d(text=<span class="string">&quot;Add new&quot;</span>)[<span class="number">1</span>]</span><br><span class="line">...</span><br><span class="line"><span class="comment"># iterator</span></span><br><span class="line"><span class="keyword">for</span> view <span class="keyword">in</span> d(text=<span class="string">&quot;Add new&quot;</span>):</span><br><span class="line">    view.info  <span class="comment"># ...</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>获取到目标元素后查看状态与信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).exists <span class="comment"># True if exists, else False</span></span><br><span class="line">d.exists(text=<span class="string">&quot;Settings&quot;</span>) <span class="comment"># alias of above property.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># advanced usage</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).exists(timeout=<span class="number">3</span>) <span class="comment"># wait Settings appear in 3s, same as .wait(3)</span></span><br><span class="line"></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).info</span><br><span class="line"></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).get_text()  <span class="comment"># get widget text</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).set_text(<span class="string">&quot;My text...&quot;</span>)  <span class="comment"># set the text</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).clear_text()  <span class="comment"># clear the text</span></span><br><span class="line"></span><br><span class="line">x, y = d(text=<span class="string">&quot;Settings&quot;</span>).center()</span><br><span class="line"><span class="comment"># x, y = d(text=&quot;Settings&quot;).center(offset=(0, 0)) # left-top x, y</span></span><br><span class="line"></span><br><span class="line">im = d(text=<span class="string">&quot;Settings&quot;</span>).screenshot()</span><br><span class="line">im.save(<span class="string">&quot;settings.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># click on the center of the specific ui object</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).click()</span><br><span class="line"></span><br><span class="line"><span class="comment"># wait element to appear for at most 10 seconds and then click</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).click(timeout=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># click with offset(x_offset, y_offset)</span></span><br><span class="line"><span class="comment"># click_x = x_offset * width + x_left_top</span></span><br><span class="line"><span class="comment"># click_y = y_offset * height + y_left_top</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).click(offset=(<span class="number">0.5</span>, <span class="number">0.5</span>)) <span class="comment"># Default center</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).click(offset=(<span class="number">0</span>, <span class="number">0</span>)) <span class="comment"># click left-top</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).click(offset=(<span class="number">1</span>, <span class="number">1</span>)) <span class="comment"># click right-bottom</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># click when exists in 10s, default timeout 0s</span></span><br><span class="line">clicked = d(text=<span class="string">&#x27;Skip&#x27;</span>).click_exists(timeout=<span class="number">10.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># click until element gone, return bool</span></span><br><span class="line">is_gone = d(text=<span class="string">&quot;Skip&quot;</span>).click_gone(maxretry=<span class="number">10</span>, interval=<span class="number">1.0</span>) <span class="comment"># maxretry default 10, interval default 1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># long click on the center of the specific UI object</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).long_click()</span><br><span class="line"></span><br><span class="line"><span class="comment"># notes : drag can not be used for Android&lt;4.3.</span></span><br><span class="line"><span class="comment"># drag the UI object to a screen point (x, y), in 0.5 second</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).drag_to(x, y, duration=<span class="number">0.5</span>)</span><br><span class="line"><span class="comment"># drag the UI object to (the center position of) another UI object, in 0.25 second</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).drag_to(text=<span class="string">&quot;Clock&quot;</span>, duration=<span class="number">0.25</span>)</span><br><span class="line"></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).swipe(<span class="string">&quot;right&quot;</span>)</span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).swipe(<span class="string">&quot;left&quot;</span>, steps=<span class="number">10</span>)</span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).swipe(<span class="string">&quot;up&quot;</span>, steps=<span class="number">20</span>) <span class="comment"># 1 steps is about 5ms, so 20 steps is about 0.1s</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).swipe(<span class="string">&quot;down&quot;</span>, steps=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).gesture((sx1, sy1), (sx2, sy2), (ex1, ey1), (ex2, ey2))</span><br><span class="line"></span><br><span class="line"><span class="comment"># notes : pinch can not be set until Android 4.3.</span></span><br><span class="line"><span class="comment"># from edge to center. here is &quot;In&quot; not &quot;in&quot;</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).pinch_in(percent=<span class="number">100</span>, steps=<span class="number">10</span>)</span><br><span class="line"><span class="comment"># from center to edge</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).pinch_out()</span><br><span class="line"></span><br><span class="line"><span class="comment"># wait until the ui object appears</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).wait(timeout=<span class="number">3.0</span>) <span class="comment"># return bool</span></span><br><span class="line"><span class="comment"># wait until the ui object gone</span></span><br><span class="line">d(text=<span class="string">&quot;Settings&quot;</span>).wait_gone(timeout=<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># fling forward(default) vertically(default) </span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).fling()</span><br><span class="line"><span class="comment"># fling forward horizontally</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).fling.horiz.forward()</span><br><span class="line"><span class="comment"># fling backward vertically</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).fling.vert.backward()</span><br><span class="line"><span class="comment"># fling to beginning horizontally</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).fling.horiz.toBeginning(max_swipes=<span class="number">1000</span>)</span><br><span class="line"><span class="comment"># fling to end vertically</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).fling.toEnd()</span><br><span class="line"></span><br><span class="line"><span class="comment"># scroll forward(default) vertically(default)</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).scroll(steps=<span class="number">10</span>)</span><br><span class="line"><span class="comment"># scroll forward horizontally</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).scroll.horiz.forward(steps=<span class="number">100</span>)</span><br><span class="line"><span class="comment"># scroll backward vertically</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).scroll.vert.backward()</span><br><span class="line"><span class="comment"># scroll to beginning horizontally</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).scroll.horiz.toBeginning(steps=<span class="number">100</span>, max_swipes=<span class="number">1000</span>)</span><br><span class="line"><span class="comment"># scroll to end vertically</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).scroll.toEnd()</span><br><span class="line"><span class="comment"># scroll forward vertically until specific ui object appears</span></span><br><span class="line">d(scrollable=<span class="literal">True</span>).scroll.to(text=<span class="string">&quot;Security&quot;</span>)</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>WatchContext<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> d.watch_context() <span class="keyword">as</span> ctx:</span><br><span class="line">    ctx.when(<span class="string">&quot;^立即(下载|更新)&quot;</span>).when(<span class="string">&quot;取消&quot;</span>).click() <span class="comment"># 当同时出现 （立即安装 或 立即取消）和 取消 按钮的时候，点击取消</span></span><br><span class="line">    ctx.when(<span class="string">&quot;同意&quot;</span>).click()</span><br><span class="line">    ctx.when(<span class="string">&quot;确定&quot;</span>).click()</span><br><span class="line">    <span class="comment"># 上面三行代码是立即执行完的，不会有什么等待</span></span><br><span class="line">    </span><br><span class="line">    ctx.wait_stable() <span class="comment"># 开启弹窗监控，并等待界面稳定（两个弹窗检查周期内没有弹窗代表稳定）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用call函数来触发函数回调</span></span><br><span class="line">    <span class="comment"># call 支持两个参数，d和el，不区分参数位置，可以不传参，如果传参变量名不能写错</span></span><br><span class="line">    <span class="comment"># eg: 当有元素匹配仲夏之夜，点击返回按钮</span></span><br><span class="line">    ctx.when(<span class="string">&quot;仲夏之夜&quot;</span>).call(<span class="keyword">lambda</span> d: d.press(<span class="string">&quot;back&quot;</span>))</span><br><span class="line">    ctx.when(<span class="string">&quot;确定&quot;</span>).call(<span class="keyword">lambda</span> el: el.click())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 其他操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了方便也可以使用代码中默认的弹窗监控逻辑</span></span><br><span class="line"><span class="comment"># 下面是目前内置的默认逻辑，可以加群at群主，增加新的逻辑，或者直接提pr</span></span><br><span class="line">    <span class="comment"># when(&quot;继续使用&quot;).click()</span></span><br><span class="line">    <span class="comment"># when(&quot;移入管控&quot;).when(&quot;取消&quot;).click()</span></span><br><span class="line">    <span class="comment"># when(&quot;^立即(下载|更新)&quot;).when(&quot;取消&quot;).click()</span></span><br><span class="line">    <span class="comment"># when(&quot;同意&quot;).click()</span></span><br><span class="line">    <span class="comment"># when(&quot;^(好的|确定)&quot;).click()</span></span><br><span class="line"><span class="keyword">with</span> d.watch_context(builtin=<span class="literal">True</span>) <span class="keyword">as</span> ctx:</span><br><span class="line">    <span class="comment"># 在已有的基础上增加</span></span><br><span class="line">    ctx.when(<span class="string">&quot;@tb:id/jview_view&quot;</span>).when(<span class="string">&#x27;//*[@content-desc=&quot;图片&quot;]&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 其他脚本逻辑</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ctx = d.watch_context()</span><br><span class="line">ctx.when(<span class="string">&quot;设置&quot;</span>).click()</span><br><span class="line">ctx.wait_stable() <span class="comment"># 等待界面不在有弹窗了</span></span><br><span class="line"></span><br><span class="line">ctx.close()</span><br></pre></td></tr></table></figure>

<ol start="8">
<li><p>全局设置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">d.HTTP_TIMEOUT = <span class="number">60</span> <span class="comment"># 默认值60s, http默认请求超时时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当设备掉线时，等待设备在线时长，仅当TMQ=true时有效，支持通过环境变量 WAIT_FOR_DEVICE_TIMEOUT 设置</span></span><br><span class="line">d.WAIT_FOR_DEVICE_TIMEOUT = <span class="number">70</span> </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.settings)</span><br><span class="line">&#123;<span class="string">&#x27;operation_delay&#x27;</span>: (<span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line"> <span class="string">&#x27;operation_delay_methods&#x27;</span>: [<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;swipe&#x27;</span>],</span><br><span class="line"> <span class="string">&#x27;wait_timeout&#x27;</span>: <span class="number">20.0</span>,</span><br><span class="line"> <span class="string">&#x27;xpath_debug&#x27;</span>: <span class="literal">False</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置点击前延时0.5s，点击后延时1s</span></span><br><span class="line">d.settings[<span class="string">&#x27;operation_delay&#x27;</span>] = (<span class="number">.5</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改延迟生效的方法</span></span><br><span class="line"><span class="comment"># 其中 double_click, long_click 都对应click</span></span><br><span class="line">d.settings[<span class="string">&#x27;operation_delay_methods&#x27;</span>] = [<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;swipe&#x27;</span>, <span class="string">&#x27;drag&#x27;</span>, <span class="string">&#x27;press&#x27;</span>]</span><br><span class="line"></span><br><span class="line">d.settings[<span class="string">&#x27;xpath_debug&#x27;</span>] = <span class="literal">True</span> <span class="comment"># 开启xpath插件的调试日志</span></span><br><span class="line">d.settings[<span class="string">&#x27;wait_timeout&#x27;</span>] = <span class="number">20.0</span> <span class="comment"># 默认控件等待时间（原生操作，xpath插件的等待时间）</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.settings[<span class="string">&#x27;click_before_delay&#x27;</span>] = <span class="number">1</span>  </span><br><span class="line">[W <span class="number">200514</span> <span class="number">14</span>:<span class="number">55</span>:<span class="number">59</span> settings:<span class="number">72</span>] d.settings[click_before_delay] deprecated: Use operation_delay instead</span><br></pre></td></tr></table></figure></li>
<li><p>输入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d.set_fastinput_ime(<span class="literal">True</span>) <span class="comment"># 切换成FastInputIME输入法</span></span><br><span class="line">d.send_keys(<span class="string">&quot;你好123abcEFG&quot;</span>) <span class="comment"># adb广播输入</span></span><br><span class="line">d.clear_text() <span class="comment"># 清除输入框所有内容(Require android-uiautomator.apk version &gt;= 1.0.7)</span></span><br><span class="line">d.set_fastinput_ime(<span class="literal">False</span>) <span class="comment"># 切换成正常的输入法</span></span><br><span class="line">d.send_action(<span class="string">&quot;search&quot;</span>) <span class="comment"># 模拟输入法的搜索</span></span><br></pre></td></tr></table></figure></li>
<li><p>Toast</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">d.toast.show(<span class="string">&quot;Hello world&quot;</span>)</span><br><span class="line">d.toast.show(<span class="string">&quot;Hello world&quot;</span>, <span class="number">1.0</span>) <span class="comment"># show for 1.0s, default 1.0s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [Args]</span></span><br><span class="line"><span class="comment"># 5.0: max wait timeout. Default 10.0</span></span><br><span class="line"><span class="comment"># 10.0: cache time. return cache toast if already toast already show up in recent 10 seconds. Default 10.0 (Maybe change in the furture)</span></span><br><span class="line"><span class="comment"># &quot;default message&quot;: return if no toast finally get. Default None</span></span><br><span class="line">d.toast.get_message(<span class="number">5.0</span>, <span class="number">10.0</span>, <span class="string">&quot;default message&quot;</span>)</span><br><span class="line"><span class="comment"># common usage</span></span><br><span class="line"><span class="keyword">assert</span> <span class="string">&quot;Short message&quot;</span> <span class="keyword">in</span> d.toast.get_message(<span class="number">5.0</span>, default=<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment"># clear cached toast</span></span><br><span class="line">d.toast.reset()</span><br><span class="line"><span class="comment"># Now d.toast.get_message(0) is None</span></span><br></pre></td></tr></table></figure></li>
<li><p>XPath</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># wait exists 10s</span><br><span class="line">d.xpath(&quot;//android.widget.TextView&quot;).wait(10.0)</span><br><span class="line"># find and click</span><br><span class="line">d.xpath(&quot;//*[@content-desc=&#x27;分享&#x27;]&quot;).click()</span><br><span class="line"># check exists</span><br><span class="line">if d.xpath(&quot;//android.widget.TextView[contains(@text, &#x27;Se&#x27;)]&quot;).exists:</span><br><span class="line">    print(&quot;exists&quot;)</span><br><span class="line"># get all text-view text, attrib and center point</span><br><span class="line">for elem in d.xpath(&quot;//android.widget.TextView&quot;).all():</span><br><span class="line">    print(&quot;Text:&quot;, elem.text)</span><br><span class="line">    # Dictionary eg: </span><br><span class="line">    # &#123;&#x27;index&#x27;: &#x27;1&#x27;, &#x27;text&#x27;: &#x27;999+&#x27;, &#x27;resource-id&#x27;: &#x27;com.netease.cloudmusic:id/qb&#x27;, &#x27;package&#x27;: &#x27;com.netease.cloudmusic&#x27;, &#x27;content-desc&#x27;: &#x27;&#x27;, &#x27;checkable&#x27;: &#x27;false&#x27;, &#x27;checked&#x27;: &#x27;false&#x27;, &#x27;clickable&#x27;: &#x27;false&#x27;, &#x27;enabled&#x27;: &#x27;true&#x27;, &#x27;focusable&#x27;: &#x27;false&#x27;, &#x27;focused&#x27;: &#x27;false&#x27;,&#x27;scrollable&#x27;: &#x27;false&#x27;, &#x27;long-clickable&#x27;: &#x27;false&#x27;, &#x27;password&#x27;: &#x27;false&#x27;, &#x27;selected&#x27;: &#x27;false&#x27;, &#x27;visible-to-user&#x27;: &#x27;true&#x27;, &#x27;bounds&#x27;: &#x27;[661,1444][718,1478]&#x27;&#125;</span><br><span class="line">    print(&quot;Attrib:&quot;, elem.attrib)</span><br><span class="line">    # Coordinate eg: (100, 200)</span><br><span class="line">    print(&quot;Position:&quot;, elem.center())</span><br></pre></td></tr></table></figure></li>
<li><p>Screenrecord</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">d.screenrecord(<span class="string">&#x27;output.mp4&#x27;</span>)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># or do something else</span></span><br><span class="line">d.screenrecord.stop() <span class="comment"># 停止录制后，output.mp4文件才能打开</span></span><br><span class="line"></span><br><span class="line">imdata = <span class="string">&quot;target.png&quot;</span> <span class="comment"># 也可以是URL, PIL.Image或OpenCV打开的图像</span></span><br><span class="line"></span><br><span class="line">d.image.match(imdata) </span><br><span class="line"><span class="comment"># 匹配待查找的图片，立刻返回一个结果</span></span><br><span class="line"><span class="comment"># 返回一个dict, eg: &#123;&quot;similarity&quot;: 0.9, &quot;point&quot;: [200, 300]&#125;</span></span><br><span class="line"></span><br><span class="line">d.image.click(imdata, timeout=<span class="number">20.0</span>)</span><br><span class="line"><span class="comment"># 在20s的时间内调用match轮询查找图片，当similarity&gt;0.9时，执行点击操作</span></span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/05/29/ui2/" data-id="cl3r52on90000zcwx3pdf393e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2022/05/21/JsBridge/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">【知识】【安卓】JsBridge</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android%E9%9A%90%E7%A7%81/" rel="tag">Android隐私</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BUG%E5%8F%8D%E6%80%9D/" rel="tag">BUG反思</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paperSummary/" rel="tag">paperSummary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 16.67px;">Android</a> <a href="/tags/Android%E9%9A%90%E7%A7%81/" style="font-size: 10px;">Android隐私</a> <a href="/tags/BUG%E5%8F%8D%E6%80%9D/" style="font-size: 10px;">BUG反思</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/paperSummary/" style="font-size: 13.33px;">paperSummary</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 20px;">小程序</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/05/29/ui2/">【知识】【python】【adb】uiautomator2 包文档</a>
          </li>
        
          <li>
            <a href="/2022/05/21/JsBridge/">【知识】【安卓】JsBridge</a>
          </li>
        
          <li>
            <a href="/2022/05/13/policyLint/">【技术】【安卓隐私合规】policyLint 工具原理解析</a>
          </li>
        
          <li>
            <a href="/2022/05/13/pythoncmdadb/">【技术】【adb】python 脚本在 cmd 控制 adb</a>
          </li>
        
          <li>
            <a href="/2022/04/22/unpackwxError/">【技术】【小程序】wxUnpacker 工具“SyntaxError： Illegal return statement” 错误</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>